-- SilentZ UI Library - Upgraded Version by Kai

local SilentZUI = {}

function SilentZUI:CreateWindow(titleText)
    local Players = game:GetService("Players")
    local LocalPlayer = Players.LocalPlayer

    local ScreenGui = Instance.new("ScreenGui")
    local Bacrnd = Instance.new("Frame")
    local Title = Instance.new("TextLabel")
    local Min = Instance.new("TextButton")
    local TabHolder = Instance.new("Frame")
    local UIGridLayout = Instance.new("UIGridLayout")
    local PlateHolder = Instance.new("Frame")
    local Plate = Instance.new("Frame")
    local BtnHolder = Instance.new("Frame")
    local UIGridLayout_2 = Instance.new("UIGridLayout")
    local Atached = Instance.new("TextLabel")

    ScreenGui.Name = "SilentZ"
    ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

    -- Helper: UIStroke in 161,0,0
    local function AddStroke(obj)
        local stroke = Instance.new("UIStroke", obj)
        stroke.Color = Color3.fromRGB(161, 0, 0)
        stroke.Thickness = 1.5
    end

    Bacrnd.Name = "Bacrnd"
    Bacrnd.Parent = ScreenGui
    Bacrnd.BackgroundColor3 = Color3.fromRGB(26, 26, 26)
    Bacrnd.Position = UDim2.new(0.344, 0, 0.3, 0)
    Bacrnd.Size = UDim2.new(0, 378, 0, 220)
    Instance.new("UICorner", Bacrnd)
    AddStroke(Bacrnd)

    Title.Name = "Title"
    Title.Parent = Bacrnd
    Title.BackgroundTransparency = 1
    Title.Position = UDim2.new(0.021, 0, 0.018, 0)
    Title.Size = UDim2.new(0, 74, 0, 33)
    Title.Font = Enum.Font.GothamBold
    Title.Text = titleText or "SilentZ"
    Title.TextColor3 = Color3.fromRGB(161, 0, 0)
    Title.TextScaled = true
    Title.TextWrapped = true

    Atached.Name = "Attached"
    Atached.Parent = Bacrnd
    Atached.BackgroundTransparency = 1
    Atached.Position = UDim2.new(0.748, 0, 0.018, 0)
    Atached.Size = UDim2.new(0, 54, 0, 24)
    Atached.Font = Enum.Font.Gotham
    Atached.Text = "Attached!"
    Atached.TextColor3 = Color3.fromRGB(255, 0, 0)
    Atached.TextScaled = true

    Min.Name = "Min"
    Min.Parent = Bacrnd
    Min.BackgroundColor3 = Color3.fromRGB(172, 0, 0)
    Min.BackgroundTransparency = 0.5
    Min.Position = UDim2.new(0.941, 0, 0.027, 0)
    Min.Size = UDim2.new(0, 12, 0, 12)
    Min.Font = Enum.Font.Gotham
    Min.Text = "x"
    Min.TextColor3 = Color3.fromRGB(0, 0, 0)
    Min.TextScaled = true
    Instance.new("UICorner", Min)

    Min.MouseButton1Click:Connect(function()
        Bacrnd.Visible = not Bacrnd.Visible
    end)

    TabHolder.Name = "TabHolder"
    TabHolder.Parent = Bacrnd
    TabHolder.BackgroundTransparency = 1
    TabHolder.Position = UDim2.new(0.021, 0, 0.2, 0)
    TabHolder.Size = UDim2.new(0, 74, 0, 160)
    UIGridLayout.Parent = TabHolder
    UIGridLayout.CellSize = UDim2.new(0, 74, 0, 25)

    PlateHolder.Name = "PlateHolder"
    PlateHolder.Parent = Bacrnd
    PlateHolder.BackgroundTransparency = 1
    PlateHolder.Position = UDim2.new(0.253, 0, 0.15, 0)
    PlateHolder.Size = UDim2.new(0, 266, 0, 171)

    Plate.Name = "Plate"
    Plate.Parent = PlateHolder
    Plate.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    Plate.Size = UDim2.new(0, 266, 0, 171)
    Instance.new("UICorner", Plate)
    AddStroke(Plate)

    BtnHolder.Name = "BtnHolder"
    BtnHolder.Parent = Plate
    BtnHolder.BackgroundTransparency = 1
    BtnHolder.Position = UDim2.new(0.045, 0, 0.06, 0)
    BtnHolder.Size = UDim2.new(0, 136, 0, 145)
    UIGridLayout_2.Parent = BtnHolder
    UIGridLayout_2.CellSize = UDim2.new(0, 120, 0, 25)

    local Window = {}

    function Window:CreateTab(tabName)
        local TabBtn = Instance.new("TextButton")
        TabBtn.Name = tabName
        TabBtn.Parent = TabHolder
        TabBtn.BackgroundColor3 = Color3.fromRGB(31, 31, 31)
        TabBtn.BackgroundTransparency = 0.5
        TabBtn.Font = Enum.Font.Gotham
        TabBtn.Text = tabName
        TabBtn.TextColor3 = Color3.fromRGB(161, 0, 0)
        TabBtn.TextScaled = true
        TabBtn.TextWrapped = true
        Instance.new("UICorner", TabBtn)
        AddStroke(TabBtn)

        local Tab = {}

        function Tab:CreateButton(text, callback)
            local Button = Instance.new("TextButton")
            Button.Name = text
            Button.Parent = BtnHolder
            Button.BackgroundColor3 = Color3.fromRGB(31, 31, 31)
            Button.BackgroundTransparency = 0.3
            Button.Font = Enum.Font.Gotham
            Button.Text = text
            Button.TextColor3 = Color3.fromRGB(161, 0, 0)
            Button.TextScaled = true
            Instance.new("UICorner", Button)
            AddStroke(Button)

            Button.MouseButton1Click:Connect(function()
                pcall(callback)
            end)
        end

        function Tab:CreateToggle(text, default, callback)
            local Toggle = Instance.new("TextButton")
            Toggle.Name = text
            Toggle.Parent = BtnHolder
            Toggle.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
            Toggle.Font = Enum.Font.Gotham
            Toggle.TextColor3 = Color3.fromRGB(161, 0, 0)
            Toggle.TextScaled = true
            Toggle.Text = text .. ": " .. (default and "ON" or "OFF")
            local state = default
            Instance.new("UICorner", Toggle)
            AddStroke(Toggle)

            Toggle.MouseButton1Click:Connect(function()
                state = not state
                Toggle.Text = text .. ": " .. (state and "ON" or "OFF")
                pcall(callback, state)
            end)
        end

        function Tab:CreateSlider(text, min, max, default, callback)
            local sliderLabel = Instance.new("TextLabel")
            sliderLabel.Parent = BtnHolder
            sliderLabel.Size = UDim2.new(0, 120, 0, 25)
            sliderLabel.Text = text .. ": " .. tostring(default)
            sliderLabel.BackgroundTransparency = 1
            sliderLabel.TextColor3 = Color3.fromRGB(161, 0, 0)
            sliderLabel.Font = Enum.Font.Gotham
            sliderLabel.TextScaled = true

            local slider = Instance.new("TextButton")
            slider.Parent = BtnHolder
            slider.Size = UDim2.new(0, 120, 0, 25)
            slider.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
            slider.Text = ""
            local uic = Instance.new("UICorner", slider)
            AddStroke(slider)

            local value = default
            slider.MouseButton1Down:Connect(function()
                local conn
                conn = game:GetService("RunService").RenderStepped:Connect(function()
                    local mouse = game:GetService("UserInputService"):GetMouseLocation().X
                    local absPos = slider.AbsolutePosition.X
                    local rel = math.clamp((mouse - absPos) / slider.AbsoluteSize.X, 0, 1)
                    value = math.floor((min + (max - min) * rel) + 0.5)
                    sliderLabel.Text = text .. ": " .. tostring(value)
                    pcall(callback, value)
                end)
                game:GetService("UserInputService").InputEnded:Wait()
                conn:Disconnect()
            end)
        end

        function Tab:CreateDropdown(label, options, callback)
            local dropdown = Instance.new("TextButton")
            dropdown.Parent = BtnHolder
            dropdown.Size = UDim2.new(0, 120, 0, 25)
            dropdown.Text = label .. ": " .. options[1]
            dropdown.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
            dropdown.TextColor3 = Color3.fromRGB(161, 0, 0)
            dropdown.Font = Enum.Font.Gotham
            dropdown.TextScaled = true
            dropdown.TextWrapped = true
            Instance.new("UICorner", dropdown)
            AddStroke(dropdown)

            local index = 1
            dropdown.MouseButton1Click:Connect(function()
                index = index + 1
                if index > #options then index = 1 end
                dropdown.Text = label .. ": " .. options[index]
                pcall(callback, options[index])
            end)
        end

        return Tab
    end

    return Window
end

return SilentZUI
